<!DOCTYPE html>
<html lang="en">

<head>
  <meta property="og:title" content="365Connect Community">
  <meta property="og:description"
    content="365Connect is a community dedicated to promoting and advancing the adoption of Microsoft D365 and Power Platform technologies. Our primary goal is to foster a supportive environment where individuals can learn, teach, and collaborate on all things related to these powerful tools. Whether you're an experienced user or just starting out, we welcome members from any part of the globe to join us in our mission to promote and develop this community.">
  <meta property="og:image" content="https://365connectcommunity.github.io/preview.png">
  <meta property="og:url" content="https://365connectcommunity.github.io/">

  <!---->

  <link rel="icon" type="image/x-icon" href="./favicon.ico">
  <!-- <meta charset="utf-8"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--<meta name="description"
    content="365Connect is a community dedicated to promoting and advancing the adoption of Microsoft D365 and Power Platform technologies. Our primary goal is to foster a supportive environment where individuals can learn, teach, and collaborate on all things related to these powerful tools. Whether you're an experienced user or just starting out, we welcome members from any part of the globe to join us in our mission to promote and develop this community.">
  <meta name="author" content="Shaheer Ahmad">
  <meta property="og:image" content="URL to your page's image thumbnail"> -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900" rel="stylesheet">

  <title>Sample Solutions | 365Connect Community</title>

  <link rel="stylesheet" href="styles.css">
  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-grad-school.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/lightbox.css">
  <!--
    
TemplateMo 557 Grad School

https://templatemo.com/tm-557-grad-school

-->
</head>
<style>
  body {
    height: auto;
  }

  .card-title {
    height: 80px;
    display: flex;
    /* Use flex for aligning items within the card-title */
    justify-content: center;
    /* Center horizontally */
    align-items: center;
    /* Center vertically */
    font-size: 30px;
  }

  .card-title1 {
    background-size: cover !important;
    height: 232px;
    display: flex;
    justify-content: center;
    background-position: center;
    align-items: center;
    background-repeat: no-repeat;
  }

  .modal-content {
    color: black;
  }

  /* Set max-width for images within the modal */
  .modal-content img {
    max-width: 100%;
    height: auto;
  }

  /* Set max-height and enable vertical scrolling for modal body */
  .modal-body {
    max-height: 70vh;
    /* Adjust the maximum height as needed */
    overflow-y: auto;
  }

  .modal-content p {
    color: black !important;
  }
</style>

<body>
  <!-- Modal -->
  <div class="modal fade" id="repoModal" tabindex="-1" aria-labelledby="repoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="repoModalLabel">Details</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div id="readmeContent"></div>
        </div>
        <div class="modal-footer">
          <a id="visitRepoLink" class="btn btn-primary" href="#" target="_blank">Visit Repository</a>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!---->
  <h1 style="display: none;">365Connect Community</h1>

  <div class="loading" id="loading">Loading&#8230;</div>
  <!--header-->
  <header class="main-header clearfix" role="header">
    <div class="logo">
      <img id="header-logo" style="height: 50px; margin-right: 20px;" src="./favicon.ico">
      <a href="./index.html" style=" font-size: 29px !important;"><em></em><span style="color: #feb70c;">3</span><span
          style="color: #5ea904;">6</span><span style="color: #04a0ed;">5</span><span
          style="color: white;">C</span><span style="text-transform: lowercase;">onnect</span></a><!--#ce392c;-->
    </div>
    <a href="#menu" class="menu-link"><i class="fa fa-bars"></i></a>
    <nav id="menu" class="main-nav" role="navigation">
      <ul class="main-menu">
        <li><a href="./index.html" class="external">Home</a></li>
        <li class="has-submenu"><a href="#">Our Family</a>
          <ul class="sub-menu">
            <li><a href="./team-members.html" class="external">Contributors</a></li>
            <li><a href="./community-members.html" class="external">Members</a></li>
            <li><a href="./become-contributor.html" class="external">Become Contributor</a></li>
            <li><a href="./signup.html" class="external">Become Member</a></li>
          </ul>
        </li>
        <li class="has-submenu active"><a href="#">Resources</a>
          <ul class="sub-menu">
            <li><a href="./events.html" class="external">Events</a></li>
            <li><a href="./blog.html" class="external">Blogs</a></li>
            <li><a href="./courses.html" class="external">Courses</a></li>
            <li><a href="./sample-soltutions.html" class="external">Sample Solutions</a></li>
          </ul>
        </li>
        <li class="has-submenu"><a href="#">Contact Us</a>
          <ul class="sub-menu">
            <li><a href="./support.html" class="external">Get Support</a></li>
            <li><a href="./index.html" class="external">Seek Guidance</a></li>
            <li><a href="./our-socials.html" class="external">Our Socials</a></li>
          </ul>
        </li>
        <li><a href="https://365connectcommunity.azurewebsites.net/" class="external" id="cartimg"></a></li>
      </ul>
    </nav>
  </header>

  <section class="section coming-soon" data-section="section3">
    <div class="container">
      <div class="row">
        <div class="col-md-7 col-xs-12">
          <div class="continer centerIt">
            <div>

              <div class="counter">

                <div class="days" style="width:100%;">
                  <div class="value">Sample Solutions</div>
                  <span>365Connect Community</span>
                  <div class="main-button" style="margin-top: 20px;">
                    <div class="scroll-to-section"><a href="https://github.com/365ConnectCommunity/sample-solutions/wiki/How-to-submit-a-Power-App-sample">Submit a Sample Solution</a></div>
                  </div>


                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
  </section>
  <section>
    <section class="section courses" data-section="section4" style="padding: 0px 30px 40px 30px;">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <div class="section-heading" style="margin-bottom: 0px !important;">
              <h2>Power Apps Solutions</h2><br><br>
              <center>
                <div style="width: 60%;">
                  <input type="text" id="searchInput" class="form-control" placeholder="Search solutions..."
                    onkeyup="filterCards()">
                </div>
              </center>


            </div>
          </div>
        </div>
      </div>
    </section>
    <center>
      <div class="container" style="margin-bottom:40px !important;">
        <div class="row" id="card-container">
          <!-- Bootstrap cards will be dynamically generated here -->
        </div>
      </div>
    </center>
  </section>
  <center><br><br><br>
  <div>
    <button id="prevPageBtn" disabled class="btn-primary" style="height: 46px;    width: 90px;">&laquo; Prev</button>
    <span id="currentPage">Page 1</span>
    <button id="nextPageBtn" class="btn-primary" style="height: 46px;    width: 90px;">Next &raquo;</button>
  </div>
</center><br><br><br>
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <p><i class="fa fa-copyright"></i> Copyright 2023 by 365Connect Community

            | Design: <a href="https://www.linkedin.com/in/shaheer-ahmad-ch" rel="sponsored" target="_parent">Shaheer
              Ahmad</a></p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <script src="assets/js/isotope.min.js"></script>
  <script src="assets/js/owl-carousel.js"></script>
  <script src="assets/js/lightbox.js"></script>
  <script src="assets/js/tabs.js"></script>
  <script src="assets/js/video.js"></script>
  <script src="assets/js/slick-slider.js"></script>
  <script src="assets/js/custom.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
  <script src="assets/js/isotope.min.js"></script>
  <script>
    const email = localStorage.getItem("email");
    const fullname = localStorage.getItem("name");


    ///////


    if (screen.height > screen.width) {
      document.getElementById("header-logo").hidden = true;
    }

    ///////////////
    // Menu data structure
    var signedIn = localStorage.getItem("name") == null || localStorage.getItem("email") == null || localStorage.getItem("email") == 'null' || localStorage.getItem("name") == 'null' || localStorage.getItem("email") == '' || localStorage.getItem("name") == '' || localStorage.getItem("email") == undefined || localStorage.getItem("name") == undefined;
    function generateProfileSubMenu() {
      if (signedIn) {
        return `
    <li class="has-submenu">
      <img id= "myprofilepic" src="./assets/images/icons8-account-64.png" style="width:45px;height:45px;border-radius:200px;border:0px solid orange;">
      <ul class="sub-menu">
        <li><a href="./login.html" class="external">Sign In</a></li>
        <li><a href="./signup.html" class="external">Sign Up</a></li>
      </ul>
    </li>
  `;
      }
      else {
        return `
    <li class="has-submenu">
      <img id= "myprofilepic" src="data:image/png;base64,${localStorage.getItem("image")}" style="width:45px;height:45px;border-radius:200px;border:2px solid orange;">
      <ul class="sub-menu">
        <li><a href="./login.html" class="external">${localStorage.firstname}</a></li>
        <li><a href="./login.html" class="external">My Registrations</a></li>
        <li><a href="./my-certificates.html" class="external">My Certificates</a></li>
        <li><a href="./index.html" class="external" id="logout">Sign Out</a></li>
      </ul>
    </li>
  `;
      }
    }


    // Add a click event listener


    // Find the parent ul element with the class "main-menu"
    const mainMenu = document.querySelector('.main-menu');

    // Append the "Profile" submenu HTML to the mainMenu
    mainMenu.insertAdjacentHTML('beforeend', generateProfileSubMenu());
    const myLink = document.getElementById('logout');
    if (document.getElementById('logout'))
      myLink.addEventListener('click', function (event) {
        // Prevent the default behavior (e.g., navigating to the href URL)
        event.preventDefault();

        // You can also perform other actions here
        localStorage.setItem("name", null);
        localStorage.setItem("email", null);
        localStorage.setItem("image", null);
        window.location.href = './index.html';

      });
    /////

    if (screen.height > screen.width) {
      document.getElementById("header-logo").hidden = true;
    }

    // JSON response data


    // Function to generate Bootstrap cards
    function generateCards(data) {
      const cardContainer = document.getElementById('card-container');

      data.forEach(item => {
        // Check if the item type is "file" and skip it
        if (item.type === 'file') {
          return;
        }

        // Create a Bootstrap column div
        const columnDiv = document.createElement('div');
        columnDiv.className = 'col-sm-6';

        // Create a Bootstrap card element
        const card = document.createElement('div');
        card.style.marginTop = '20px';
        card.style.backgroundColor = "#202124";
        card.style.color = "white";
        card.className = 'card';

        // Create card body
        const cardBody = document.createElement('div');
        cardBody.className = 'card-body';
        cardBody.style.marginBottom = '20px';

        const cardTitle1 = document.createElement('h5');
        cardTitle1.className = 'card-title1';

        var myHeaders = new Headers();
        myHeaders.append("Cookie", "_octo=GH1.1.408325191.1695299995; logged_in=no");

        var requestOptions = {
          method: 'GET',
          headers: myHeaders,
          redirect: 'follow'
        };
        let screenshotFileName = '';
        try {
          fetch("https://api.github.com/repos/365ConnectCommunity/sample-solutions/contents/" + item.name + "/assets", requestOptions)
            .then(response => response.json())
            .then(result => {

              const assetValues = result;// Extract values from the result object
              for (const asset of assetValues) {
                if (asset.name.toLowerCase().includes('screenshot')) {
                  screenshotFileName = asset.download_url;
                  break;
                }
              }
              console.log(screenshotFileName)
              if (screenshotFileName) {
                cardTitle1.style.background = `url(${screenshotFileName})`;
              }
              else {
                cardTitle1.style.background = "url(https://dynamics365blocks.files.wordpress.com/2018/09/splash.jpg)";
              }
            })
            .catch(error => { console.log('error', error); cardTitle1.style.background = "url(https://dynamics365blocks.files.wordpress.com/2018/09/splash.jpg)"; });
        } catch {
          cardTitle1.style.background = "url(https://dynamics365blocks.files.wordpress.com/2018/09/splash.jpg)";
        }




        // Create card title



        //cardTitle1.style.background = `url(${screenshotFileName})`;
        //cardTitle1.style.marginBottom = "50px";

        const cardTitle = document.createElement('h5');
        cardTitle.className = 'card-title';
        //cardTitle.style.marginBottom = "50px";
        cardTitle.textContent = item.name;

        // Create card text
        const cardText = document.createElement('p');
        cardText.className = 'card-text';
        cardText.textContent = item.description;

        // Create card link (button)
        const cardLink = document.createElement('button');
        cardLink.type = 'button';
        cardLink.textContent = 'View Details';
        cardLink.className = 'btn btn-primary';
        cardLink.style.backgroundColor = "orange";
        cardLink.style.borderColor = "orange";

        // Attach an event listener to the button to load readme content and open the modal
        cardLink.addEventListener('click', () => {
          loadReadmeContent(item.name, item.html_url);
        });

        // Append card title, text, and link to card body
        cardBody.appendChild(cardTitle1);
        cardBody.appendChild(cardTitle);
        cardBody.appendChild(cardText);
        cardBody.appendChild(cardLink);

        // Append card body to card
        card.appendChild(cardBody);

        // Append column to card container
        columnDiv.appendChild(card);

        // Append column to card container
        cardContainer.appendChild(columnDiv);
      });
      document.getElementById("loading").style.display = "none";
    }
    var closeButtonHeader = document.querySelector(".modal-header .close");
    var closeButtonFooter = document.querySelector(".modal-footer button.btn-secondary");

    // Function to close the modal
    function closeModal() {
      // Find the modal dialog element and close it
      var modalDialog = document.querySelector(".modal.fade");
      modalDialog.style.display = "none";
    }

    // Add click event listeners to both close buttons
    closeButtonHeader.addEventListener("click", closeModal);
    closeButtonFooter.addEventListener("click", closeModal);

    // Function to load and render the README content
    function loadReadmeContent(repoName, repoUrl) {
      const readmeContentContainer = document.getElementById('readmeContent');
      const visitRepoLink = document.getElementById('visitRepoLink');
      const modal = document.getElementById('repoModal');

      // Fetch the readme.md content from the repository
      fetch(`https://api.github.com/repos/365ConnectCommunity/sample-solutions/contents/${repoName}/README.md`)
        .then(response => {
          if (response.status === 404) {
            throw new Error('Readme file not found.');
          }
          if (!response.ok) {
            throw new Error('Failed to fetch readme content.');
          }
          return response.json();
        })
        .then(data => {
          if (data.content) {
            const readmeContent = atob(data.content); // Decode Base64 content
            // Convert markdown content to HTML (you'll need a library for this step)
            const markdownConverter = new showdown.Converter(); // Assuming you use Showdown library for markdown conversion
            const htmlContent = markdownConverter.makeHtml(readmeContent);

            readmeContentContainer.innerHTML = htmlContent;
            visitRepoLink.href = repoUrl;
            modal.classList.add('show'); // Show the modal by adding the 'show' class
            modal.style.display = 'block'; // Make sure the modal is displayed
            modal.setAttribute('aria-hidden', 'false'); // Set aria-hidden attribute to 'false'
          } else {
            throw new Error('Readme content is empty.');
          }
        })
        .catch(error => {
          console.error('Error loading readme content:', error);
          readmeContentContainer.innerHTML = '<p>Error loading readme content.</p>';
          visitRepoLink.href = repoUrl;
          modal.classList.add('show'); // Show the modal even on error
          modal.style.display = 'block';
          modal.setAttribute('aria-hidden', 'false');
        });
    }




    // Call the function to generate cards using the JSON data
    var requestOptions = {
      method: 'GET',
      redirect: 'follow'
    };

    fetch("https://api.github.com/repos/365ConnectCommunity/sample-solutions/contents", requestOptions)
      .then(response => response.text())
      .then(result => generateCards(JSON.parse(result)))
      .catch(error => console.log('error', error));
    function filterCards() {
      const searchInput = document.getElementById('searchInput').value.toLowerCase();
      const cards = document.querySelectorAll('.card');

      cards.forEach(card => {
        const cardTitle = card.querySelector('.card-title').textContent.toLowerCase();
        const cardDescription = card.querySelector('.card-text').textContent.toLowerCase();

        if (cardTitle.includes(searchInput) || cardDescription.includes(searchInput)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });

    }
    if (screen.height > screen.width) {
      document.getElementById("myprofilepic").hidden = true;
    }




    ////////////////


    // Define variables to track pagination
    let currentPage = 1;
    const cardsPerPage = 6; // Change this to the desired number of cards per page

    // Function to display cards for the current page
    function displayCurrentPage() {
      const cards = document.querySelectorAll('.card');
      const startIndex = (currentPage - 1) * cardsPerPage;
      const endIndex = startIndex + cardsPerPage;

      cards.forEach((card, index) => {
        if (index >= startIndex && index < endIndex) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });

      document.getElementById('currentPage').textContent = `Page ${currentPage}`;
    }

    // Function to update pagination buttons based on the current page
    function updatePaginationButtons() {
      const prevPageBtn = document.getElementById('prevPageBtn');
      const nextPageBtn = document.getElementById('nextPageBtn');

      prevPageBtn.disabled = currentPage === 1;
      nextPageBtn.disabled = currentPage === Math.ceil(cards.length / cardsPerPage);
    }

    // Add event listeners to pagination buttons
    document.getElementById('prevPageBtn').addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        displayCurrentPage();
        updatePaginationButtons();
      }
    });

    document.getElementById('nextPageBtn').addEventListener('click', () => {
      const totalPage = Math.ceil(cards.length / cardsPerPage);
      if (currentPage < totalPage) {
        currentPage++;
        displayCurrentPage();
        updatePaginationButtons();
      }
    });

    // Initial display of cards and pagination buttons
    displayCurrentPage();
    updatePaginationButtons();
    if (localStorage.getItem("image") == '' || localStorage.getItem("image") == null || localStorage.getItem("image") == 'null' || localStorage.getItem("image") == 'undefined') {
      document.getElementById("myprofilepic").src = './assets/images/icons8-account-64.png';
    }

  </script>

</body>

</html>